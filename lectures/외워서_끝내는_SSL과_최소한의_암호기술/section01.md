### 📗 기초 이론

**Checksum(검사합)** : 데이터를 전송하거나 저장할 때, 오류 여부 확인(데이터 무결성 검출)을 위해 사용된다.

- 일정 자릿수를 정하고 범위를 넘는 자리 올림은 버려서 자릿수를 유지한다.
- 예) 종: 6, 구: 4, 6 + 4 = 10, sum: 0(10의 자리 버림)

**Hash**: 데이터를 고유한 값(해시값)으로 변환하는 함수이며 데이터 무결성 검증 및 보안을 위해 사용된다.
- 단방향성(복원 불가)
- 입력값의 크기와 상관없이 고정된 결과값 길이가 반환
- `MD5`, `SHA-1`,`SHA-224`,`SHA-256`,`SHA-384`,`SHA-512`

**사용자 인증**(소지, 암기, 생체, 위치 등)을 위해 사용되는 평문을 그대로 DB에 저장하는 것이 아닌, **해시값을 DB에 저장**하여 보안을 강화한다.

- `MD5`는 길이가 짧아, brute force attack(무차별 대입 공격)의 우려가 있음.

- **Salt** : 해시 함수에 추가되는 값으로 같은 평문을 암호화하여도 salt 값에 따라 다른 결과값이 반환된다.


### 📗 암호 기술

**대칭키(Symmetric System)** : 키 하나로 암호화 및 복호화가 모두 가능하다.
- 비대칭키 방식에 비해 효율적이다.
- 송신자, 수진자가 같은 키를 공유하기 때문에 키 관리가 중요하다.
- `DES`, `3DES`, `SEED-128`, `ARIA`, `AES-128`, `AES-256`

예) 
```
        0100 0001 -> 평문
(XOR)   1101 0101 -> 대칭키
---------------------------
        1001 0100 -> 암호문

대칭키로 평문 -> 암호문(암호화) 혹은 암호문 -> 평문(복호화)가 가능하다.
```

**비대칭키(Asymmetric Key)** : 하나의 쌍을 이루는 키(`Public Key`, `Private Key`)가 서로 상호작용한다.

- 공개키로 암호화시, 비공개키로 복호화 가능
- 비공개키로 서명시, 공개키로 검증 가능
- 보안성은 뛰어나지만 연산 속도가 느리다.
- `RSA`, `ECC`

예)
```
65 ^ 5 mod 323 = 12
12 ^ 29 mode 323 = 65

5 = public key
29 = private key

65라는 평문을 5라는 public key로 암호화하여 나온 결과 12

12를 29라는 private key로 복호화하면 평문 65
```

### 📗 PKI 시스템과 인터넷

대칭키는 하나의 key로 암호화와 복호화를 진행하지만 키를 안전하게 보관할 수 있는 방법이 있는가? 

1. **비대칭 키로 해결**

- `PC`와 `Server`는 각각 한 쌍의 비대칭키를 생성한다.
- **공개키 교환** (서버의 공개키를 PC가 받고, PC의 공개키를 서버가 받음)\
- **데이터 송수신 과정**
  - `PC → Server`: 서버의 공개키로 암호화하여 전송 → 서버는 자신의 개인키로 복호화
  - `Server → PC`: PC의 공개키로 암호화하여 전송 → PC는 자신의 개인키로 복호화
- **한계**:
  - 비대칭키 암호화는 연산속도가 크고 속도가 느림
  - 대칭키에 비해 비효율적
  - 공격자가 중간에서 공개키 위조 가능(MITM 공격) 

2. **대칭키 + 비대칭키 혼합(하이브리드)**

- PC는 대칭키(`Session Key`) 생성, 서버는 비대칭키 생성
- 서버의 공개키를 PC로 전달
- 서버의 공개키로 대칭키를 암호화하여 서버로 전송
- 서버는 개인키로 복호화하여 대칭키 획득

- **데이터 송수신 과정**
  - `PC ↔ Server`: 공유한 PC의 대칭키로 데이터를 암호화/복호화

**교환되는 Server Public Key를 믿어도 되나?**

**해킹된 데이터 송수신 과정** :
1. 공격자는 서버와 클라이언트 사이의 통신을 가로챔.
2. 공격자는 자신만의 공개키를 생성하여 PC에게 전달.
3. PC는 공격자의 공개키로 데이터를 암호화하여 보냄.
4. 공격자는 자신의 비공개키로 암호문을 복호화하여 평문을 얻음.
5. 데이터를 조작한 후, 서버의 공개키로 다시 암호화하여 서버로 전송.
6. 서버는 정상적인 요청으로 인식하고 처리.

- 추가로 매번 비대칭키를 생성하는 것은 비효율적이다.
- 유효기간을 설정 후, 해당 기간 내에서는 동일한 키 유지.

**PKI(Public Key Infrastructure) 공개키 기반 구조** : 공개키(비대칭 암호화)를 안전하게 운영하기 위한 인증 및 관리 시스템이며 공개키의 신뢰성을 보장한다.

- 공개키의 신뢰성을 보장하기 위해 **공인된 기관**이 공개키를 검증하고 디지털 인증서를 발급한다.

**CA(Certificates Authority, 인증기관)** : 신뢰할 수 있는 제 3자가 공개키를 검증하고 인증서를 발급하는 기관

**RA(Registration Authority, 등록기관)** : 사용자의 신원을 확인하여 CA 가 인증서를 발급할 수 있도록 보조하는 기관

1. 도메인 관리자는 RA를 통해 인증서를 요청
   - server 비대칭키 쌍을 생성
   - RA는 도메인 소유자 확인 후, CA에게 인증서 발급 요청
2. CA가 인증서를 발급
   - 도메인 관리자의 공개키 + 도메인 정보가 포함된 `X.509` 인증서 생성
   - CA의 개인키로 **디지털 서명 추가**
3. PC(클라이언트)는 CA의 공개키로 인증서를 검증
    - CA 공개키는 루트 인증서에서 찾아온다.
    - CA 공개키를 통해 인증서의 서명(CA 개인키)을 복호화
4. PC는 **인증서의 내용을 바탕으로 만든 해시값**과 **복호화된 값**이 일치하면 인증서의 무결성이 보장되고 CA 서명의 유효성을 보장